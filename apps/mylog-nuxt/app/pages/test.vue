<script lang="ts" setup>
definePageMeta({ layout: false })

const { refresh } = useFetch<Log[]>('/test/hello-post', {
  ...FetchOptsDefault,
  headers: { Cookie: `token=${useCookie('token').value}` },
  onResponse({ response }) {
    console.log('ğŸ¤ ', response._data)
  },
})
const test = () => {
  // æµ‹è¯•èƒ½ä¸èƒ½æ‹¿åˆ° token
  // console.log('token', useCookie('token').value)
  // æµ‹è¯•è®¿é—®åç«¯æ¥å£
  // const cookie = useRequestHeaders(['cookie'])
  // console.log('ğŸ” useRequestHeaders', cookie)
  // console.log('ğŸ” useCookie(token)', useCookie('token').value)
  // refresh()
}

// test()

/**
 * credentials: 'include' è¦åœ¨åç«¯è®¾ç½® credentials: true
 * ä½†æ˜¯åç«¯æ‹¿ä¸åˆ°cookie
 *
 * ç”¨ useRequestHeaders(['cookie']) å¯ä»¥ï¼Œä½†æ˜¯åœ¨å®¢æˆ·ç«¯æ‹¿ä¸åˆ°ï¼Œä¼šè¿”å› {}
 *
 * æœ€ç»ˆç”¨ useCookie('token').value æ‹¿åˆ°äº†
 *
 *
 * ç°åœ¨æ˜¯åŒæ—¶åŠ  credentials: 'include' å’Œ useCookie('token').value
 * æœåŠ¡å™¨ä¸Šèµ° headers.cookie
 * å®¢æˆ·ç«¯ä¸Šèµ° credentials: 'include'
 *
 */
</script>

<template>
  <div class="test-page _m">
    <el-button @click="test">test</el-button>
  </div>

  <!-- <LiquidGlass /> -->
</template>

<style lang="scss" scoped>
.test-page {
}
</style>
